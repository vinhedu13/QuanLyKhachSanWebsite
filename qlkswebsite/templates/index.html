{% extends "Layout/base.html" %}
{%block content%}
<div>
    <img src="{{ url_for('static', filename='images/canhan.png') }}" alt="" class="img-">
</div>
<div class="container">
    <div class="search-container">
        <form action="/timkiem" method="post"> <!-- Thay ƒë·ªïi action theo y√™u c·∫ßu c·ªßa b·∫°n -->
            <div class="search-box">
                <div class="search-item">
                    <label for="destination">B·∫°n mu·ªën ƒë·∫øn ƒë√¢u?</label>
                    <input list="destinations" id="destination" name="destination"
                           placeholder="Nh·∫≠p ho·∫∑c ch·ªçn ƒëi·ªÉm ƒë·∫øn">
                    <datalist id="destinations">
                        <option value="H√† N·ªôi">
                        <option value="TP. H·ªì Ch√≠ Minh">
                        <option value="ƒê√† N·∫µng">
                        <option value="ƒê√† L·∫°t">
                        <option value="V≈©ng T√†u">
                    </datalist>
                </div>
                <div class="search-item">
                    <label for="ngayNhanPhong">Ng√†y nh·∫≠n ph√≤ng</label>
                    <input type="date" id="checkin-date" name="ngayNhanPhong" class="form-control" required>
                </div>
                <div class="search-item">
                    <label for="ngayTraPhong">Ng√†y tr·∫£ ph√≤ng</label>
                    <input type="date" id="checkout-date" name="ngayTraPhong" class="form-control" required>
                </div>
                <div class="msearch-item">
                    <label for="soLuong">S·ªë ng∆∞·ªùi</label>
                    <div id="guest-picker">
                        <input type="text" id="guests" name="soLuong" placeholder="Nh·∫•p ƒë·ªÉ ch·ªçn s·ªë ng∆∞·ªùi"
                               class="form-control" readonly required>
                        <div class="guest-dropdown">
                            <div class="guest-row">
                                <label for="soLuong">S·ªë Ph√≤ng:</label>
                                <button type="button" class="decrease" data-target="adults">-</button>
                                <span id="adults-count">1</span>
                                <button type="button" class="increase" data-target="adults">+</button>
                            </div>
                            <button type="button" class="apply-btn btn btn-primary" >√Åp d·ª•ng</button>
                        </div>
                    </div>
                </div>
                <button type="submit" class="search-btn" onclick="kiemTraThoiGian()">T√¨m</button> <!-- N√∫t submit -->
            </div>
        </form>
    </div>

    <section class="search">
        <h1>Lo·∫°i ph√≤ng</h1>
        <div class="categories">
            <div class="category">
                <a href="\room\single"><img src="{{ url_for('static', filename='images/phongdon.jpg') }}"
                                            alt="Ph√≤ng ƒê∆°n"></a>
                <p>Ph√≤ng Th∆∞·ªùng</p>
            </div>
            <div class="category">
                <a href="\room\double"><img src="{{ url_for('static', filename='images/phongdoi.jpg') }}"
                                            alt="Ph√≤ng ƒê√¥i"></a>
                <p>Ph√≤ng Th∆∞∆°ng Gia</p>
            </div>
            <div class="category">
                <a href="\room\family"><img src="{{ url_for('static', filename='images/phonggiadinh.jpg') }}"
                                            alt="Ph√≤ng Gia ƒê√¨nh"></a>
                <p>Ph√≤ng VIP</p>
            </div>
        </div>
    </section>
    <section>
        <div class="alert alert-warning text-center mt-4" role="alert">
            <h5 class="mb-3">üéâ ∆Øu ƒë√£i ƒë·∫∑c bi·ªát! üéâ</h5>
            <p>Gi·∫£m gi√° ƒë·∫øn <strong>50%</strong> cho t·∫•t c·∫£ ƒë∆°n h√†ng! Ch·ªâ c√≤n <span id="promo-timer"></span>.</p>
        </div>
    </section>
</div>

<script>
    // H√†m ki·ªÉm tra th·ªùi gian nh·∫≠n ph√≤ng
    function KiemTraThoiGianNhanPhong_DatPhong(thoiGianNhan) {
        const thoiGianDat = new Date(); // L·∫•y th·ªùi gian hi·ªán t·∫°i
        const thoiGianNhanDate = new Date(thoiGianNhan); // Chuy·ªÉn ƒë·ªïi chu·ªói th·ªùi gian nh·∫≠n th√†nh ƒë·ªëi t∆∞·ª£ng Date

        // T√≠nh kho·∫£ng th·ªùi gian gi·ªØa th·ªùi gian nh·∫≠n v√† th·ªùi gian ƒë·∫∑t
        const khoangThoiGian = thoiGianNhanDate - thoiGianDat;

        // Chuy·ªÉn ƒë·ªïi t·ª´ milliseconds sang days
        const khoangThoiGianDays = Math.floor(khoangThoiGian / (1000 * 60 * 60 * 24));

        return khoangThoiGianDays;
    }

    // H√†m x·ª≠ l√Ω s·ª± ki·ªán khi nh·∫•n n√∫t ki·ªÉm tra
    function kiemTraThoiGian() {
        const thoiGianNhan = document.getElementById("checkin-date").value; // L·∫•y gi√° tr·ªã t·ª´ input
        const ketQua = KiemTraThoiGianNhanPhong_DatPhong(thoiGianNhan); // G·ªçi h√†m ki·ªÉm tra
        if (ketQua > 28) {
            alert('Th·ªùi gian nh·∫≠n kh√¥ng ƒë∆∞·ª£c qu√° 28 ng√†y k·ªÉ t·ª´ khi ƒë·∫∑t')
            event.preventDefault();
        }
    }
</script>

{%endblock%}
